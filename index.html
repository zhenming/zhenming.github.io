<style>
	#game {
		display: flex;
		flex-wrap: wrap;
    /*width: 600px;*/ /*columns * 30*/
		cursor: pointer;
		border: 1px solid black;
	}
	.box {
		height: 28px;
		width: 28px;
		border: 1px solid black;
		background-color: ccc;
	}
	.fade {
		background-color: white;
	}
	.blue {
		background-color: blue;
	}
	.disable-clicks {
		pointer-events: none;
	}
</style>

<h1>Hello World<h1>

<div id="game">
</div>

<script>
  
  /*
  cells state
  0 - Not clicked
  1 - Clicked, safe
  2 - Flagged
  */
  const DEFAULT_CELL_STATE = 0
  const CLICKED_CELL_STATE = 1
  const FLAGGED_CELL_STATE = 2
  
	var board = document.getElementById("game")	
  var boxSize = 30

  var rows = 15
  var columns = 30
  var numberOfCells = rows*columns
  
  var boardWidth = columns * boxSize  
  board.setAttribute("style","width:"+ boardWidth +"px")
  
  createBoard()
  
  function createBoard() {
  	for (var i = 0; i < numberOfCells; i++) {
  		var box = document.createElement('div')
  		box.className = "box";
  		box.setAttribute('data-index', i)
      box.setAttribute('data-state', DEFAULT_CELL_STATE)
  		box.onclick = boxClicked
      box.oncontextmenu = boxRightClicked
  		board.appendChild(box)
  	}
  }
	
	function boxClicked(event) {
		var box = event.target
    var index = box.getAttribute('data-index')
    var state = box.getAttribute('data-state')

		if (state == DEFAULT_CELL_STATE) {
      // only allow click event for default cell state
      box.textContent = state
      box.setAttribute('data-state', CLICKED_CELL_STATE)
      box.classList.add("fade")
		}
		console.log("LC: " + box.getAttribute('data-index'))
	};
	
  function boxRightClicked(event) {
		var box = event.target
    var index = box.getAttribute('data-index')
    var state = box.getAttribute('data-state')
    
		if (state == DEFAULT_CELL_STATE) {
      box.textContent = index
      box.setAttribute('data-state', FLAGGED_CELL_STATE)
      box.classList.add("blue")
		} else if (state == FLAGGED_CELL_STATE) {
      box.textContent = ''
      box.setAttribute('data-state', DEFAULT_CELL_STATE)
      box.classList.remove("blue")
		}
		
		console.log("RC: " + box.getAttribute('data-index'))
    return false 
  };
  
</script>